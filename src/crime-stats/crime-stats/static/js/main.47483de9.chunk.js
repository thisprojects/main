(this["webpackJsonpcrime-stats"]=this["webpackJsonpcrime-stats"]||[]).push([[0],{15:function(e,t){e.exports="data:image/png;base64,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"},19:function(e,t,a){e.exports=a(44)},24:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),s=a.n(l),o=(a(24),a(5)),c=a.n(o),i=a(12),u=a(13),m=a(17),d=a(14),p=a(18),g=a(8),h=a(2),f=a(7);function E(e){return r.a.createElement("div",{id:"loading",className:e.loading?"show-loading":"hide-loading"},r.a.createElement("h1",null,"LOADING"),r.a.createElement(f.a,{icon:h.c,size:"3x",spin:!0}),r.a.createElement("p",null,"Major cities may take some time."))}function A(e){return r.a.createElement("div",{style:e.errors?{}:{display:"none"}},r.a.createElement("h3",null,e.errors))}function v(e){return e.filterState?r.a.createElement("div",{className:"filters"},r.a.createElement(y,{categories:Object.keys(e.filterState),filterState:e.filterState,totalCrimeCount:e.totalCrimeCount})):r.a.createElement("div",null,r.a.createElement("p",null,"Nothing To Filter"))}function y(e){return e.categories.map((function(t,a){return r.a.createElement("span",{key:a,className:"filter-container"},r.a.createElement("label",{key:a+1},r.a.createElement("input",{key:a+2,type:"checkbox",name:t,value:t}),r.a.createElement("span",{key:a+3,className:"filter-item-wrapper"},r.a.createElement("p",{key:a+4,className:"category-header"},t),r.a.createElement("p",{key:a+5,className:"category-count"},e.filterState[t].count," Counts"," "),r.a.createElement("p",{key:a+6,className:"category-percentage"},"(",(e.filterState[t].count/e.totalCrimeCount*100).toFixed(2)," ","%)"))))}))}var C=a(16),S="AIzaSyCyNv5BOZZfdKO3VDhQCOA3Ufm8tv8rCF8",b=function(){for(var e=document.querySelectorAll(".filter-container input"),t=0;t<e.length;t++)e[t].checked=!1},w=function(){var e=document.querySelector("#post-code").value;return fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(e,",uk&key=").concat(S)).then((function(e){return e.json()})).then((function(e){return e.results[0].geometry.location})).catch((function(e){return console.log("Location API Error - Invalid Location -----\x3e",e),"Location Error - Location is invalid. Remember only UK locations will return results."}))},k=function(e,t){var a=document.querySelector("#year-select").value,n=document.querySelector("#month-select").value;return fetch("https://data.police.uk/api/crimes-street/all-crime?lat=".concat(e,"&lng=").concat(t,"&date=").concat(a,"-").concat(n)).then((function(e){return e.json()})).catch((function(e){return console.log("Police API Error - Caught Error Is -----\x3e",e),"Crime API Error - Try an earlier month."}))},N=function(e,t){return e.location.street.name<t.location.street.name?-1:e.location.street.name>t.location.street.name?1:0},L=function(e,t){return null===e.outcome_status?1:null===t.outcome_status?-1:e.outcome_status.category<t.outcome_status.category?-1:e.outcome_status.category>t.outcome_status.category?1:0},I=function(e,t){var a=Object.keys(e),n=[];return a.forEach((function(a){!0===e[a].state&&n.push.apply(n,Object(C.a)(t.filter((function(e){return e.category===a}))))})),n.length>0?n:t},j=function(){for(var e=(new Date).getFullYear(),t=[e],a=0;a<10;a++)t.push(e-(a+1));return t};function Z(e){return r.a.createElement("div",{onClick:function(){return e.showAndHideSliders(e.selector,e.slideClass)},className:e.theClass},r.a.createElement(f.a,{icon:e.icon}),r.a.createElement("p",null,e.label))}function G(e){return r.a.createElement("div",{className:"postcode-picker"},r.a.createElement("input",{id:"post-code",type:"text",placeholder:"Location"}))}function R(e){return r.a.createElement("div",{className:"submit-button"},r.a.createElement("button",{onClick:function(){e.buttonClick()}},"Submit"))}var H=function(){return r.a.createElement("div",{className:"date-year"},r.a.createElement("span",null,"Year"),r.a.createElement("select",{id:"year-select",defaultValue:"2019"},r.a.createElement(O,{years:j()})))},O=function(e){return e.years.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))},W=function(){return r.a.createElement("div",{className:"date-month"},r.a.createElement("span",null,"Month"),r.a.createElement("select",{id:"month-select"},r.a.createElement(F,null)))},F=function(){return["01","02","03","04","05","06","07","08","09","10","11","12"].map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))};function M(e){return e.results.length>0?e.results.map((function(e,t){return r.a.createElement("div",{key:t,className:"stat-row"},r.a.createElement("span",{className:"result-category"},e.category),r.a.createElement("span",{className:"result-location"},e.location.street.name),r.a.createElement("span",{className:"result-outcome"},null!==e.outcome_status?e.outcome_status.category:"No Outcome Recorded"))})):r.a.createElement("div",{className:"no-results"},r.a.createElement("p",null,"No Results - Click start to choose a location. Results are only available for UK locations"))}var x=function(e){return r.a.createElement("div",{className:"total-crimes"},r.a.createElement("p",null,"Total Crimes ",e.totalCrimes),r.a.createElement("input",{type:"radio",name:"sort",value:"location",onChange:function(){return e.locationSort()}}),r.a.createElement("p",null,"Location Sort"),r.a.createElement("input",{type:"radio",name:"sort",value:"outcome",onChange:function(){return e.outcomeSort()}}),r.a.createElement("p",null,"Outcome Sort"))};var U=function(e){return r.a.createElement("div",{className:"crime-stats"},r.a.createElement(x,{totalCrimes:e.results.length,locationSort:e.applyLocationSort,outcomeSort:e.applyOutcomeSort}),r.a.createElement("div",{className:"results-table"},r.a.createElement(M,{results:e.results})))},z=a(15),P=a.n(z),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).setResults=function(e,t,n){var r;a.setState({crimeResults:e,filteredResults:e,filterState:(r=e,r.reduce((function(e,t){return e[t.category]?e[t.category].count++:(e[t.category]={},e[t.category].state=!1,e[t.category].count=1),e}),{})),errorState:t||null,loadingState:n||null})},a.showAndHideSliders=function(e,t){document.querySelector(e).classList.toggle(t)},a.applyLocationSort=function(){a.setState({filteredResults:a.state.filteredResults.sort(N)})},a.applyOutcomeSort=function(){a.setState({filteredResults:a.state.filteredResults.sort(L)})},a.state={lat:1,lng:52,crimeResults:[],filteredResults:[],filterState:{},errorState:null,loadingState:null},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"setFilterListeners",value:function(){for(var e=this,t=document.querySelectorAll(".filter-container input"),a=0;a<t.length;a++)!0===t[a].checked&&!1===this.state.filterState[t[a].name.state]&&(this.state.filterState[t[a].name].state=!0,this.applyFilters()),t[a].addEventListener("click",(function(t){var a=t.target;e.state.filterState[a.name].state=a.checked,e.applyFilters()}))}},{key:"callCrimeApi",value:function(e){var t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(k(this.state.lat,this.state.lng));case 2:t=a.sent,Array.isArray(t)?this.setResults(t,null,!1):this.setResults([],t,!1),b(),this.setFilterListeners(),e||this.showAndHideSliders("#header-wrapper","side-hide");case 7:case"end":return a.stop()}}),null,this)}},{key:"applyFilters",value:function(){this.setState({filteredResults:I(this.state.filterState,this.state.crimeResults)})}},{key:"onMarkerDragEnd",value:function(e){this.setState({lat:e.latLng.lat(),lng:e.latLng.lng(),loadingState:!0}),this.callCrimeApi(!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"page-wrapper"},r.a.createElement(E,{loading:this.state.loadingState}),r.a.createElement("div",{id:"header-wrapper",className:"side-slide side-hide"},r.a.createElement(Z,{showAndHideSliders:this.showAndHideSliders,selector:"#header-wrapper",theClass:"header-stub",label:"Start",slideClass:"side-hide",icon:h.b}),r.a.createElement("div",{className:"header-active"},r.a.createElement("div",{className:"start-menu-inputs"},r.a.createElement(G,null),r.a.createElement(W,null),r.a.createElement(H,null)),r.a.createElement(R,{buttonClick:function(){var t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(w());case 2:(t=a.sent).lat&&t.lng?(e.setState({lat:t.lat,lng:t.lng,loadingState:!0}),e.callCrimeApi()):e.setResults([],t);case 4:case"end":return a.stop()}}))}}))),r.a.createElement("div",{id:"map",className:"map"},r.a.createElement(g.Map,{initialCenter:{lat:52.489471,lng:-1.898575},center:{lat:this.state.lat,lng:this.state.lng},google:this.props.google,zoom:13},r.a.createElement(g.Marker,{icon:P.a,position:{lat:this.state.lat,lng:this.state.lng},draggable:!0,onDragend:function(t,a,n){return e.onMarkerDragEnd(n)},name:"Current location"}))),r.a.createElement("div",{className:"filter-wrapper top-slide top-hide"},r.a.createElement(v,{filterState:this.state.filterState,totalCrimeCount:this.state.crimeResults.length})),r.a.createElement(Z,{showAndHideSliders:this.showAndHideSliders,selector:".filter-wrapper",theClass:"filter-stub",label:"Filters",slideClass:"top-hide",icon:h.a}),r.a.createElement("div",{className:"errors-wrapper",style:this.state.errorState?{display:"flex"}:{display:"none"}},r.a.createElement(A,{errors:this.state.errorState})),r.a.createElement("div",{className:"crime-stats-wrapper"},r.a.createElement(U,{results:this.state.filteredResults,applyLocationSort:this.applyLocationSort,applyOutcomeSort:this.applyOutcomeSort})))}}]),t}(n.Component),J=Object(g.GoogleApiWrapper)({apiKey:S})(V);a(43);var B=function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.47483de9.chunk.js.map